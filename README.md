# Gemini-Powered Git Auto-Commit

This script automates the process of writing conventional git commit messages by using the Gemini CLI to generate a message based on your staged changes.

## Features

-   **Automatic Commit Message Generation**: Analyzes your staged code changes (`git diff --cached`) to create a meaningful commit message.
-   **Conventional Commits**: Enforces the [Conventional Commits specification](https://www.conventionalcommits.org/) (e.g., `feat:`, `fix:`, `docs:`) for a clean and readable git history.
-   **Interactive Workflow**: Displays the generated message for review before committing.
-   **Error Handling**: Includes checks to ensure the Gemini CLI is installed and handles potential API failures gracefully.

## Prerequisites

Before using this script, please ensure you have the following installed and configured:

1.  **Git**: The script is a wrapper around `git`.
2.  **Gemini CLI**: The `gemini` command-line tool must be installed and accessible in your system's `PATH`.
3.  **Authentication**: You must be authenticated with the Gemini API for the CLI to work.

## Installation

1.  Clone this repository or download the `commit.sh` script.
2.  Make the script executable:
    ```bash
    chmod +x commit.sh
    ```

## Usage

1.  Make changes to your project files.
2.  Instead of `git commit`, simply run the script from your repository's root directory:
    ```bash
    ./commit.sh
    ```

The script will automatically add all changes, generate a commit message, show it to you, and then perform the commit.

## How It Works

1.  **Check for Gemini CLI**: Verifies that the `gemini` command is available.
2.  **Stage Changes**: Runs `git add .` to stage all modified files.
3.  **Check for Differences**: Exits if there are no staged changes.
4.  **Generate Prompt**: Creates a prompt for the Gemini CLI, instructing it to act as an expert programmer and generate a conventional commit message based on the output of `git diff --cached`.
5.  **Call Gemini**: Executes the `gemini -p "$PROMPT"` command to get the commit message.
6.  **Commit**: Runs `git commit -m "..."` using the message generated by Gemini.
7.  **Error Fallback**: If the `gemini` command fails or returns an empty message, the script will abort the commit and run `git reset` to unstage the changes, allowing you to debug the issue or commit manually.